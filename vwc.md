# Verifiable Witness Credentials

This format describing a linkage proof whereby a "Fair Witness" from a particular "Trust Community" provides attestation that they witnessed the presentation or exchange of certain credentials, for example [VRCs](./vrc.md), especially during an explicit witnessing session between two or more entities (individual, organizational, or machine).

For more information please see [Witnessed VRC Exchange](./witnessed_vrc_flow.md).

## Status of This Document

This is an early-stage draft for review and discussion. It is not a standard and will be revised based on feedback.

## Credential Structure

```json
{
  "@context": [
    "https://www.w3.org/ns/credentials/v2",
    "https://example.org/credentials/witnessed-exchange/v1"
  ],
  "id": "...",
  "type": ["VerifiableCredential", "WitnessedCredential"],
  "issuer": "...",
  "issuanceDate": "...",
  "credentialSubject": {
    "id": "...",
    "session": {
      "id": "...",
      "witnessId": "...",
      "startTime": "...",
      "expirationTime": "..."
    },
    "witness": {
      "alsoKnownAs": [ ... ],
      "linkageProofs": [ ... ],
      "externalProofs": [ ... ],
      "nonce": "..."
    },
    "authorizationCredential": {
      "id": "...",
      "type": [ ... ],
      "issuer": "...",
      "role": "...",
      "digest": "..."
    },
    "witnessedCredentials": [
      {
        "id": "...",
        "digest": "..."
      }
    ]
  },
  "proof": { "...": "VC-compliant proof" }
}
```


## Definitions

- **@context:**
  An array with the W3C Verifiable Credentials context and your custom context for witnessed exchanges.

- **id:**
  Unique identifier (URI/URN) for this WitnessedCredential.

- **type:**
  Array specifying credential types; MUST include `"VerifiableCredential"` and SHOULD include a specific type, e.g., `"WitnessedCredential"`.

- **issuer:**
  DID/URI of the witness who attests to having observed the issuance of the specified credentials.

- **issuanceDate:**
  ISO8601 timestamp for when this WitnessedExchangeCredential was issued.

- **id:**
  DID/URI of the witness (often included for compatibility).

- **session:** (`object`, Optional)
Describes the live witnessing session linking the Fair Witness and the participants, if any.
Contains:
  - **id** (`string`, Required): A unique session identifier (e.g. UUID or URN)
  - **witnessId** (`string`, Optional): The DID of the  session witness, if any
  - **startTime:** (`string`, Required)
    ISO8601 timestamp for when this session started
  - **expirationTime:** (`string`, Required)
    ISO8601 timestamp for when this session expires, if uncompleted by that time

- **witness:**
An object describing the witness with possible additional identifiers ("alsoKnownAs"), cryptographic proofs linking identities ("linkageProofs"), and other external proofs of authorization or reputation ("externalProofs").

- **alsoKnownAs:**
  List of alternative identifiers or DIDs by which this witness may be known (such as other DIDs, URIs, usernames, etc).

- **linkageProofs** (`array[object]`, Optional)
  An array of cryptographic proofs, each generated by signing a canonical message (such as the subject's DID or a credential hash) with the private key of an identifier listed in `alsoKnownAs`. Used to demonstrate that the entity controls the referenced identifier.
  - **type** (`string`, Required)
    The proof or signature type (e.g., `"Ed25519Signature2020"`, `"PGPSignature2020"`).
  - **identifier** (`string`, Required)
    The identifier (from `alsoKnownAs`) for which control is being proven.
  - **created** (`string`, Required)
    The ISO 8601 date and time when the proof was created.
  - **proofValue** (`string`, Required)
    The cryptographic signature value, such as a JWS or PGP armored block, demonstrating control of the identifier.

- **externalProofs** (`array[object]`, Optional)
  An array of references to externally published proofs or verifiable credentials that demonstrate the entityâ€™s control over an identifier in `alsoKnownAs`.
  - **identifier** (`string`, Required)
    The identifier (from `alsoKnownAs`) to which the external proof refers.
  - **proofUrl** (`string`, Required)
    A HTTPS URL, DID URL, or other resolvable URI where the verifiable proof can be found.
  - **type** (`string`, Optional)
    The type or standard of the external proof (e.g., `"VerifiableCredential"`, `"LinkedDataSignature2020"`, `"PGPSignature2020"`).
  - **created** (`string`, Optional)
    The ISO 8601 date and time when the external proof was created.

- **authorizationCredential:** An object referencing the authorization credential received from a Trust Community by the witness.
  - **id:** Identifier (DID/URI) of the authorization credential.
  - **type:**
  Array specifying credential types; MUST include `"VerifiableCredential"` and SHOULD include a specific type, e.g., `"AuthorizationCredential"`.
  - **issuer:** DID/URI of the trust community.
  - **role:** Role of the authorized entity (here, "Witness").
  - **digest:** (Optional) Hash of the referenced credential.

- **nonce** (string, Optional)
A unique nonce from the witness that used when coordinating an exchange session

- **witnessedCredentials:**
  Array listing each credential witnessed by the witness. The might be VRCs exchange between the two entities, but they might also be authorization credentials for the entities from the Trust Community, demonstrating their shared membership in that community.

  - **id:**
    DID, URI, or identifier of the credential that was observed being issued/exchanged.

  - **digest:**
    (Optional) A digest (e.g., SHA-256 hash) of the observed credential for integrity/binding.

- **proof:**
  The proof object containing a cryptographic signature generated by the issuer (witness), as per the W3C Verifiable Credentials standard.



## Example

Suppose Alice issues a relationship credential to Bob (`did:example:aliceVrcBob`) and Bob issues a relationship credential to Alice (`did:example:bobVrcAlice`).
The witness DID is `did:example:witness123`.

```json
{
  "@context": [
    "https://www.w3.org/ns/credentials/v2",
    "https://example.org/credentials/witnessed-exchange/v1"
  ],
  "id": "urn:uuid:5bae64c9-eae5-4583-87b0-33a63a46cbec",
  "type": [
    "VerifiableCredential",
    "WitnessedExchangeCredential"
  ],
  "issuer": "did:example:witness123",
  "issuanceDate": "2024-06-09T14:50:00Z",
  "credentialSubject": {
    "id": "did:example:witness123",
    "witness": {
      "alsoKnownAs": [
        "did:example:witnessTrustCommunityDid",
        "openpgp4fpr:ABCD1234EF5678901234567890ABCDEF12345678"
      ],
      "linkageProofs": [
        {
          "type": "Ed25519Signature2020",
          "identifier": "did:example:witnessTrustCommunityDid",
          "created": "2024-06-20T08:00:00Z",
          "proofValue": "zHTh34rGk2Wm..."
        },
        {
          "type": "PGPSignature2020",
          "identifier": "openpgp4fpr:ABCD1234EF5678901234567890ABCDEF12345678",
          "created": "2024-06-20T08:01:00Z",
          "proofValue": "-----BEGIN PGP SIGNATURE-----..."
        }
      ],
      "nonce": "3fd6d44b-2e2f-4182-a8e3-3bf841f6c6a9",
    }
    "authorizationCredential": {
      "id": "did:example:authcred1",
      "type": ["VerifiableCredential", "AuthorizationCredential"],
      "issuer": "did:example:trustcommunity1",
      "role": "Witness",
      "digest": "sha256:auth456..."
    },
    "witnessedCredentials": [
      {
        "id": "did:example:aliceVrcBob",
        "digest": "sha256:abcd1234..."
      },
      {
        "id": "did:example:bobVrcAlice",
        "digest": "sha256:dcba4321..."
      }
    ],
    "session": {
      "id": "d91e13c0-67a4-4aed-9e48-04e249c83a00",
      "witnessId": "did:example:witness123",
      "startTime": "2024-06-09T14:50:00Z",
      "expirationTime": "2024-06-09T15:50:00Z"
    }
  },
  "proof": {
    "type": "Ed25519Signature2020",
    "created": "2024-06-09T14:51:00Z",
    "proofPurpose": "assertionMethod",
    "verificationMethod": "did:example:witness123#key-1",
    "jws": "eyJ...signature"
  }
}
```